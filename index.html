
var map = new naver.maps.Map('map', {
    useStyleMap: true,
    center: new naver.maps.LatLng(37.3595704, 127.105399),
    mapTypeControl: true,
    mapTypeControlOptions: {
        style: naver.maps.MapTypeControlStyle.DROPDOWN
    }
});

function startCadastralLayer() {
    var cadastralLayer = new naver.maps.CadastralLayer({ useStyleMap: true });

    var btn = $('#cadastral');

    naver.maps.Event.addListener(map, 'cadastralLayer_changed', function(cadastralLayer) {
        if (cadastralLayer.getMap()) {
            btn.addClass('control-on').val('지적도 끄기');
        } else {
            btn.removeClass('control-on').val('지적도 켜기');
        }
    });

    cadastralLayer.setMap(map);

    btn.on('click', function(e) {
        e.preventDefault();

        if (cadastralLayer.getMap()) {
            cadastralLayer.setMap(null);
            btn.removeClass('control-on').val('지적도 켜기');
        } else {
            cadastralLayer.setMap(map);
            btn.addClass('control-on').val('지적도 끄기');
        }
    });
}

naver.maps.Event.once(map, 'init_stylemap', startCadastralLayer);
